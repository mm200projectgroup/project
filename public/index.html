<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
</head>
<body>
    <h1>Registrer</h1>
        <input id="username" placeholder="username" >
        <input id="password" placeholder="password" type="password" >
        <input id="email" placeholder="email" >
        <button id="registrering" onclick="registerBruker()" >Registrer</button>
        <hr>
    <h1>Logg inn</h1>
        <input id="logInnUsername" placeholder="username" >
        <input id="loggInnpassword" placeholder="password" type="password" >
        <button id="loggInn" onclick="loggInn()" >loggInn</button>
    
    <h3 id="output"></h3>
    
    
   
    

</body>
<script>
    let username = document.getElementById("username");
    let password = document.getElementById("password");
    let email = document.getElementById("email");
  
    let loggInnUsername = document.getElementById("logInnUsername");
    let loggInnpassword = document.getElementById("loggInnpassword");
    
    let output = document.getElementById("output");
    
    
    
    
    
    
    
    function sayHello(){
            fetch("/app/login").then(data => {
                return data.json();
            }).then(user =>{
                output.innerHTML= user.name;
            });
        }
    
    

    
    
//Registerer bruker
    function sendData(endpoint, data){
        return fetch(endpoint, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json; charset=utf-8",
                },
                body: JSON.stringify(data)
            }).then(data => {
                return data.json();
            });
    }

    
    
    //Sender inn logginn info for å teste på serveren
    function loggInn(){   
        
        let user = {
                    name:document.getElementById("logInnUsername").value,
                    password:document.getElementById("loggInnpassword").value
                };
        
        sendData("/app/login",user)
            .then(json => {output.innerHTML= "Velkommen " + json.name})
            .catch(error =>{
                output.innerHTML = "Feil brukernavn eller passord";
                console.log(error);
            });
             
             
            
    }
    
    
    
    
    function registerBruker(){   
        
        let regInfo = {
                    name:document.getElementById("username").value,
                    password:document.getElementById("password").value,
                    email:document.getElementById("email").value
                };
        
        sendData("/app/user",regInfo)
            .then(json => {console.log(json) })
            .catch(error =>{
                console.log(error);
            });
             
             
            
    }
    
   
    
    
    
    
    
</script>
</html>